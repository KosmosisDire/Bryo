-- Test: Returning Local Struct from Function
-- Expected: 3.0

type Point
{
    f32 x, y

    new(f32 xVal, f32 yVal)
    {
        x = xVal
        y = yVal
    }
}

fn CreatePoint() -> Point
{
    var p = new Point(1.0, 2.0)
    return p
}

fn CreateAndModify() -> Point
{
    var p = new Point(3.0, 4.0)
    p.x = 5.0
    return p
}

fn Main_f32_
{
    var p1 = CreatePoint()
    var p2 = CreateAndModify()

    -- Should return 1.0 + 5.0 - 4.0 + 1.0 = 3.0
    return p1.x + p2.x - p2.y + p1.y
}
