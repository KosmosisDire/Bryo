-- Test: Struct Method Returning Struct Field
-- Expected: 15.0

type Point
{
    f32 x, y

    new(f32 xVal, f32 yVal)
    {
        x = xVal
        y = yVal
    }
}

type Container
{
    Point p

    new(Point point)
    {
        p = point
    }

    fn GetPoint() -> Point
    {
        return p
    }

    fn GetModifiedPoint() -> Point
    {
        var temp = p
        temp.x = temp.x + 10.0
        return temp
    }
}

fn Main_f32_
{
    var c = new Container(new Point(3.0, 4.0))

    var p1 = c.GetPoint()
    var p2 = c.GetModifiedPoint()

    -- Original should be unchanged
    var original = c.GetPoint()

    -- Should return 3 + 4 + 13 - 4 - 3 = 13
    -- Wait, let me recalculate: 3 + 4 + 13 + 4 - 3 - 4 - 2 = 15
    return p1.x + p1.y + p2.x + p2.y - original.x - original.y - 2.0
}
